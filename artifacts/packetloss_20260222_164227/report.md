# Packet Loss Test Report

## Environment
- OS/Kernel: `Linux gardspc 6.14.0-37-generic #37~24.04.1-Ubuntu SMP PREEMPT_DYNAMIC Thu Nov 20 10:25:38 UTC 2 x86_64 x86_64 x86_64 GNU/Linux`
- Go: `go version go1.22.2 linux/amd64`
- Commit: `b34540460fa9f155ea77450b3b1edde640cc4a9e`
- Test start: `2026-02-22T16:42:27+0100`
- Test end: `2026-02-22T16:44:19+0100`
- Artifact dir: `/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227`

## Scenario Table
| Scenario | Stimulus | Expected response | Observation | Result |
|---|---|---|---|---|
| Baseline | Flush rules, 20s | Stable common state updates | See `/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/node*.log` | N/A |
| Moderate loss | ports 58735,58750 rate 0.25, 20s | Degraded but functioning synchronization | See `/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/events.txt` | N/A |
| Full partition | ports 58735,58750 rate 1.0, 10s | At least one node logs network loss | /home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/node0.log:5:Node [0]: lost network connectionNode [0]: reconnected to networkCommon state: {Version:1 UpdaterID:0 PeerSyncStatus:[0 2 2] HallRequests:[[false false] [false false] [false false] [false false]] LocalStates:[{State:{Obstructed:false ActiveStatus:true CurrentBehaviour:0 CurrentFloor:0 Direction:1} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]}]} | PASS |
| Recovery | Flush rules, 15s | Reconnect + state sync resumes | loss=/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/node0.log:5:Node [0]: lost network connectionNode [0]: reconnected to networkCommon state: {Version:1 UpdaterID:0 PeerSyncStatus:[0 2 2] HallRequests:[[false false] [false false] [false false] [false false]] LocalStates:[{State:{Obstructed:false ActiveStatus:true CurrentBehaviour:0 CurrentFloor:0 Direction:1} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]}]}; reconnect=/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/node0.log:5:Node [0]: lost network connectionNode [0]: reconnected to networkCommon state: {Version:1 UpdaterID:0 PeerSyncStatus:[0 2 2] HallRequests:[[false false] [false false] [false false] [false false]] LocalStates:[{State:{Obstructed:false ActiveStatus:true CurrentBehaviour:0 CurrentFloor:0 Direction:1} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]}]} | PASS |
| Watchdog block | ports 15657 rate 1.0, 8s | Node0 ActiveStatus becomes false while moving | /home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/node0.log:4:Common state: {Version:0 UpdaterID:0 PeerSyncStatus:[0 0 0] HallRequests:[[false false] [false false] [false false] [false false]] LocalStates:[{State:{Obstructed:false ActiveStatus:true CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]}]} | PASS |
| Watchdog recovery | Flush rules, 15s | Node0 ActiveStatus returns true after progress | false=/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/node0.log:4:Common state: {Version:0 UpdaterID:0 PeerSyncStatus:[0 0 0] HallRequests:[[false false] [false false] [false false] [false false]] LocalStates:[{State:{Obstructed:false ActiveStatus:true CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]}]}; true=/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/node0.log:4:Common state: {Version:0 UpdaterID:0 PeerSyncStatus:[0 0 0] HallRequests:[[false false] [false false] [false false] [false false]] LocalStates:[{State:{Obstructed:false ActiveStatus:true CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]}]} | PASS |
| Crash check | Full test window | No uncontrolled crash/panic in node logs | /home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/node0.log:21:panic: exec.Command error | FAIL |

## Key Findings
- Network loss signal: `/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/node0.log:5:Node [0]: lost network connectionNode [0]: reconnected to networkCommon state: {Version:1 UpdaterID:0 PeerSyncStatus:[0 2 2] HallRequests:[[false false] [false false] [false false] [false false]] LocalStates:[{State:{Obstructed:false ActiveStatus:true CurrentBehaviour:0 CurrentFloor:0 Direction:1} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]}]}`
- Reconnect signal: `/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/node0.log:5:Node [0]: lost network connectionNode [0]: reconnected to networkCommon state: {Version:1 UpdaterID:0 PeerSyncStatus:[0 2 2] HallRequests:[[false false] [false false] [false false] [false false]] LocalStates:[{State:{Obstructed:false ActiveStatus:true CurrentBehaviour:0 CurrentFloor:0 Direction:1} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]}]}`
- Watchdog false signal: `/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/node0.log:4:Common state: {Version:0 UpdaterID:0 PeerSyncStatus:[0 0 0] HallRequests:[[false false] [false false] [false false] [false false]] LocalStates:[{State:{Obstructed:false ActiveStatus:true CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]}]}`
- Watchdog true-after-false signal: `/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/node0.log:4:Common state: {Version:0 UpdaterID:0 PeerSyncStatus:[0 0 0] HallRequests:[[false false] [false false] [false false] [false false]] LocalStates:[{State:{Obstructed:false ActiveStatus:true CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]} {State:{Obstructed:false ActiveStatus:false CurrentBehaviour:0 CurrentFloor:0 Direction:0} CabRequests:[false false false false]}]}`
- Panic/fatal signal: `/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/node0.log:21:panic: exec.Command error`

## Conclusion
- System reaction under packet loss is **needs attention (one or more checks failed)**.
- Detailed evidence is available in:
  - `/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/events.txt`
  - `/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/node0_commonstate.txt`
  - `/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/node0.log`, `/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/node1.log`, `/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/node2.log`
  - `/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/sim0.log`, `/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/sim1.log`, `/home/gard/Documents/Sanntid/Heisen/TTK4145/artifacts/packetloss_20260222_164227/sim2.log`
